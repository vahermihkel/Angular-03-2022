/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { BsNavigationDirection } from '../../models';
import { BsDatepickerConfig } from '../../bs-datepicker.config';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from './bs-calendar-layout.component';
import * as ɵngcc2 from './bs-datepicker-navigation-view.component';
import * as ɵngcc3 from '@angular/common';
import * as ɵngcc4 from './bs-datepicker-day-decorator.directive';

const _c0 = [3, "calendar", "onNavigate", "onViewMode"];
const _c1 = ["role", "grid", 1, "days", "weeks"];
const _c2 = [4, "ngIf"];
const _c3 = ["aria-label", "weekday", 4, "ngFor", "ngForOf"];
const _c4 = [4, "ngFor", "ngForOf"];
function BsDaysCalendarViewComponent_th_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelement(0, "th");
} }
const _c5 = ["aria-label", "weekday"];
function BsDaysCalendarViewComponent_th_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "th", _c5);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r885 = ctx.index;
    const ctx_r882 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵtextInterpolate1("", ctx_r882.calendar.weekdays[i_r885], " ");
} }
const _c6 = ["class", "week", 3, "active-week", 4, "ngIf"];
const _c7 = ["role", "gridcell", 4, "ngFor", "ngForOf"];
const _c8 = [1, "week"];
const _c9 = [3, "click", "mouseenter", "mouseleave"];
function BsDaysCalendarViewComponent_tr_8_td_1_Template(rf, ctx) { if (rf & 1) {
    const _r892 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td", _c8);
    ɵngcc0.ɵɵstyling();
    ɵngcc0.ɵɵelementStart(1, "span", _c9);
    ɵngcc0.ɵɵlistener("click", function BsDaysCalendarViewComponent_tr_8_td_1_Template_span_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r892); const week_r886 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r890 = ɵngcc0.ɵɵnextContext(); return ctx_r890.selectWeek(week_r886); });
    ɵngcc0.ɵɵlistener("mouseenter", function BsDaysCalendarViewComponent_tr_8_td_1_Template_span_mouseenter_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r892); const week_r886 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r893 = ɵngcc0.ɵɵnextContext(); return ctx_r893.weekHoverHandler(week_r886, true); });
    ɵngcc0.ɵɵlistener("mouseleave", function BsDaysCalendarViewComponent_tr_8_td_1_Template_span_mouseleave_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r892); const week_r886 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r895 = ɵngcc0.ɵɵnextContext(); return ctx_r895.weekHoverHandler(week_r886, false); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const i_r887 = ɵngcc0.ɵɵnextContext().index;
    const ctx_r888 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵclassProp("active-week", ctx_r888.isWeekHovered);
    ɵngcc0.ɵɵstylingApply();
    ɵngcc0.ɵɵselect(2);
    ɵngcc0.ɵɵtextInterpolate(ctx_r888.calendar.weekNumbers[i_r887]);
} }
const _c10 = ["role", "gridcell"];
const _c11 = ["bsDatepickerDayDecorator", "", 3, "day", "click", "mouseenter", "mouseleave"];
function BsDaysCalendarViewComponent_tr_8_td_2_Template(rf, ctx) { if (rf & 1) {
    const _r900 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "td", _c10);
    ɵngcc0.ɵɵelementStart(1, "span", _c11);
    ɵngcc0.ɵɵlistener("click", function BsDaysCalendarViewComponent_tr_8_td_2_Template_span_click_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r900); const day_r898 = ctx.$implicit; const ctx_r899 = ɵngcc0.ɵɵnextContext(2); return ctx_r899.selectDay(day_r898); });
    ɵngcc0.ɵɵlistener("mouseenter", function BsDaysCalendarViewComponent_tr_8_td_2_Template_span_mouseenter_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r900); const day_r898 = ctx.$implicit; const ctx_r901 = ɵngcc0.ɵɵnextContext(2); return ctx_r901.hoverDay(day_r898, true); });
    ɵngcc0.ɵɵlistener("mouseleave", function BsDaysCalendarViewComponent_tr_8_td_2_Template_span_mouseleave_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r900); const day_r898 = ctx.$implicit; const ctx_r902 = ɵngcc0.ɵɵnextContext(2); return ctx_r902.hoverDay(day_r898, false); });
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const day_r898 = ctx.$implicit;
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵproperty("day", day_r898);
    ɵngcc0.ɵɵselect(2);
    ɵngcc0.ɵɵtextInterpolate(day_r898.label);
} }
function BsDaysCalendarViewComponent_tr_8_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "tr");
    ɵngcc0.ɵɵtemplate(1, BsDaysCalendarViewComponent_tr_8_td_1_Template, 3, 2, "td", _c6);
    ɵngcc0.ɵɵtemplate(2, BsDaysCalendarViewComponent_tr_8_td_2_Template, 3, 2, "td", _c7);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const week_r886 = ctx.$implicit;
    const ctx_r883 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵselect(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r883.options.showWeekNumbers);
    ɵngcc0.ɵɵselect(2);
    ɵngcc0.ɵɵproperty("ngForOf", week_r886.days);
} }
var BsDaysCalendarViewComponent = /** @class */ (function () {
    function BsDaysCalendarViewComponent(_config) {
        this._config = _config;
        this.onNavigate = new EventEmitter();
        this.onViewMode = new EventEmitter();
        this.onSelect = new EventEmitter();
        this.onHover = new EventEmitter();
        this.onHoverWeek = new EventEmitter();
    }
    /**
     * @param {?} event
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.navigateTo = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var step = BsNavigationDirection.DOWN === event ? -1 : 1;
        this.onNavigate.emit({ step: { month: step } });
    };
    /**
     * @param {?} event
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.changeViewMode = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.onViewMode.emit(event);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.selectDay = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.onSelect.emit(event);
    };
    /**
     * @param {?} week
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.selectWeek = /**
     * @param {?} week
     * @return {?}
     */
    function (week) {
        var _this = this;
        if (!this._config.selectWeek) {
            return;
        }
        if (week.days
            && week.days[0]
            && !week.days[0].isDisabled
            && this._config.selectFromOtherMonth) {
            this.onSelect.emit(week.days[0]);
            return;
        }
        if (week.days.length === 0) {
            return;
        }
        /** @type {?} */
        var selectedDay = week.days.find((/**
         * @param {?} day
         * @return {?}
         */
        function (day) {
            return _this._config.selectFromOtherMonth
                ? !day.isDisabled
                : !day.isOtherMonth && !day.isDisabled;
        }));
        this.onSelect.emit(selectedDay);
    };
    /**
     * @param {?} cell
     * @param {?} isHovered
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.weekHoverHandler = /**
     * @param {?} cell
     * @param {?} isHovered
     * @return {?}
     */
    function (cell, isHovered) {
        var _this = this;
        if (!this._config.selectWeek) {
            return;
        }
        /** @type {?} */
        var hasActiveDays = cell.days.find((/**
         * @param {?} day
         * @return {?}
         */
        function (day) {
            return _this._config.selectFromOtherMonth
                ? !day.isDisabled
                : !day.isOtherMonth && !day.isDisabled;
        }));
        if (hasActiveDays) {
            cell.isHovered = isHovered;
            this.isWeekHovered = isHovered;
            this.onHoverWeek.emit(cell);
        }
    };
    /**
     * @param {?} cell
     * @param {?} isHovered
     * @return {?}
     */
    BsDaysCalendarViewComponent.prototype.hoverDay = /**
     * @param {?} cell
     * @param {?} isHovered
     * @return {?}
     */
    function (cell, isHovered) {
        if (this._config.selectFromOtherMonth && cell.isOtherMonth) {
            cell.isOtherMonthHovered = isHovered;
        }
        this.onHover.emit({ cell: cell, isHovered: isHovered });
    };
    /** @nocollapse */
    BsDaysCalendarViewComponent.ctorParameters = function () { return [
        { type: BsDatepickerConfig }
    ]; };
    BsDaysCalendarViewComponent.propDecorators = {
        calendar: [{ type: Input }],
        options: [{ type: Input }],
        onNavigate: [{ type: Output }],
        onViewMode: [{ type: Output }],
        onSelect: [{ type: Output }],
        onHover: [{ type: Output }],
        onHoverWeek: [{ type: Output }]
    };
BsDaysCalendarViewComponent.ngComponentDef = ɵngcc0.ɵɵdefineComponent({ type: BsDaysCalendarViewComponent, selectors: [["bs-days-calendar-view"]], factory: function BsDaysCalendarViewComponent_Factory(t) { return new (t || BsDaysCalendarViewComponent)(ɵngcc0.ɵɵdirectiveInject(BsDatepickerConfig)); }, inputs: { calendar: "calendar", options: "options" }, outputs: { onNavigate: "onNavigate", onViewMode: "onViewMode", onSelect: "onSelect", onHover: "onHover", onHoverWeek: "onHoverWeek" }, consts: 9, vars: 4, template: function BsDaysCalendarViewComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "bs-calendar-layout");
        ɵngcc0.ɵɵelementStart(1, "bs-datepicker-navigation-view", _c0);
        ɵngcc0.ɵɵlistener("onNavigate", function BsDaysCalendarViewComponent_Template_bs_datepicker_navigation_view_onNavigate_1_listener($event) { return ctx.navigateTo($event); });
        ɵngcc0.ɵɵlistener("onViewMode", function BsDaysCalendarViewComponent_Template_bs_datepicker_navigation_view_onViewMode_1_listener($event) { return ctx.changeViewMode($event); });
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(2, "table", _c1);
        ɵngcc0.ɵɵelementStart(3, "thead");
        ɵngcc0.ɵɵelementStart(4, "tr");
        ɵngcc0.ɵɵtemplate(5, BsDaysCalendarViewComponent_th_5_Template, 1, 0, "th", _c2);
        ɵngcc0.ɵɵtemplate(6, BsDaysCalendarViewComponent_th_6_Template, 2, 1, "th", _c3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(7, "tbody");
        ɵngcc0.ɵɵtemplate(8, BsDaysCalendarViewComponent_tr_8_Template, 3, 2, "tr", _c4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵselect(1);
        ɵngcc0.ɵɵproperty("calendar", ctx.calendar);
        ɵngcc0.ɵɵselect(5);
        ɵngcc0.ɵɵproperty("ngIf", ctx.options.showWeekNumbers);
        ɵngcc0.ɵɵselect(6);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.calendar.weekdays);
        ɵngcc0.ɵɵselect(8);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.calendar.weeks);
    } }, directives: [ɵngcc1.BsCalendarLayoutComponent, ɵngcc2.BsDatepickerNavigationViewComponent, ɵngcc3.NgIf, ɵngcc3.NgForOf, ɵngcc4.BsDatepickerDayDecoratorComponent], encapsulation: 2 });
/*@__PURE__*/ ɵngcc0.ɵsetClassMetadata(BsDaysCalendarViewComponent, [{
        type: Component,
        args: [{
                selector: 'bs-days-calendar-view',
                // changeDetection: ChangeDetectionStrategy.OnPush,
                template: "\n    <bs-calendar-layout>\n      <bs-datepicker-navigation-view\n        [calendar]=\"calendar\"\n        (onNavigate)=\"navigateTo($event)\"\n        (onViewMode)=\"changeViewMode($event)\"\n      ></bs-datepicker-navigation-view>\n\n      <!--days matrix-->\n      <table role=\"grid\" class=\"days weeks\">\n        <thead>\n        <tr>\n          <!--if show weeks-->\n          <th *ngIf=\"options.showWeekNumbers\"></th>\n          <th *ngFor=\"let weekday of calendar.weekdays; let i = index\"\n              aria-label=\"weekday\">{{ calendar.weekdays[i] }}\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr *ngFor=\"let week of calendar.weeks; let i = index\">\n          <td class=\"week\" [class.active-week]=\"isWeekHovered\"  *ngIf=\"options.showWeekNumbers\">\n            <span\n                (click)=\"selectWeek(week)\"\n                (mouseenter)=\"weekHoverHandler(week, true)\"\n                (mouseleave)=\"weekHoverHandler(week, false)\">{{ calendar.weekNumbers[i] }}</span>\n          </td>\n          <td *ngFor=\"let day of week.days\" role=\"gridcell\">\n          <span bsDatepickerDayDecorator\n                [day]=\"day\"\n                (click)=\"selectDay(day)\"\n                (mouseenter)=\"hoverDay(day, true)\"\n                (mouseleave)=\"hoverDay(day, false)\">{{ day.label }}</span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n\n    </bs-calendar-layout>\n  "
            }]
    }], function () { return [{ type: BsDatepickerConfig }]; }, { _config: [], onNavigate: [{
            type: Output
        }], onViewMode: [{
            type: Output
        }], onSelect: [{
            type: Output
        }], onHover: [{
            type: Output
        }], onHoverWeek: [{
            type: Output
        }], navigateTo: [], changeViewMode: [], selectDay: [], selectWeek: [], weekHoverHandler: [], isWeekHovered: [], hoverDay: [], calendar: [{
            type: Input
        }], options: [{
            type: Input
        }] });
    return BsDaysCalendarViewComponent;
}());
export { BsDaysCalendarViewComponent };
if (false) {
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.calendar;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.options;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.onNavigate;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.onViewMode;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.onSelect;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.onHover;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.onHoverWeek;
    /** @type {?} */
    BsDaysCalendarViewComponent.prototype.isWeekHovered;
    /**
     * @type {?}
     * @private
     */
    BsDaysCalendarViewComponent.prototype._config;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImM6L1VzZXJzL3ZhaGVybWloL2tvb2xpdHVzZWQvQW5ndWxhci0wMy0yMDIyL2FuZ3VsYXItYmFrZXJ5c2hvcC9ub2RlX21vZHVsZXMvbmd4LWJvb3RzdHJhcC9kYXRlcGlja2VyL2VzbTUvdGhlbWVzL2JzL2JzLWRheXMtY2FsZW5kYXItdmlldy5jb21wb25lbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQTZITSxBQU9BOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Y0FhQSIsImZpbGUiOiJicy1kYXlzLWNhbGVuZGFyLXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlcyxleHRyYVJlcXVpcmUsbWlzc2luZ092ZXJyaWRlLG1pc3NpbmdSZXR1cm4sdW51c2VkUHJpdmF0ZU1lbWJlcnMsdXNlbGVzc0NvZGV9IGNoZWNrZWQgYnkgdHNjXG4gKi9cbmltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCc05hdmlnYXRpb25EaXJlY3Rpb24gfSBmcm9tICcuLi8uLi9tb2RlbHMnO1xuaW1wb3J0IHsgQnNEYXRlcGlja2VyQ29uZmlnIH0gZnJvbSAnLi4vLi4vYnMtZGF0ZXBpY2tlci5jb25maWcnO1xudmFyIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQoX2NvbmZpZykge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBfY29uZmlnO1xuICAgICAgICB0aGlzLm9uTmF2aWdhdGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25WaWV3TW9kZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkhvdmVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm9uSG92ZXJXZWVrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQucHJvdG90eXBlLm5hdmlnYXRlVG8gPSAvKipcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICB2YXIgc3RlcCA9IEJzTmF2aWdhdGlvbkRpcmVjdGlvbi5ET1dOID09PSBldmVudCA/IC0xIDogMTtcbiAgICAgICAgdGhpcy5vbk5hdmlnYXRlLmVtaXQoeyBzdGVwOiB7IG1vbnRoOiBzdGVwIH0gfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IGV2ZW50XG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQucHJvdG90eXBlLmNoYW5nZVZpZXdNb2RlID0gLyoqXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMub25WaWV3TW9kZS5lbWl0KGV2ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gZXZlbnRcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUuc2VsZWN0RGF5ID0gLyoqXG4gICAgICogQHBhcmFtIHs/fSBldmVudFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMub25TZWxlY3QuZW1pdChldmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gez99IHdlZWtcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUuc2VsZWN0V2VlayA9IC8qKlxuICAgICAqIEBwYXJhbSB7P30gd2Vla1xuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZnVuY3Rpb24gKHdlZWspIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcuc2VsZWN0V2Vlaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWVrLmRheXNcbiAgICAgICAgICAgICYmIHdlZWsuZGF5c1swXVxuICAgICAgICAgICAgJiYgIXdlZWsuZGF5c1swXS5pc0Rpc2FibGVkXG4gICAgICAgICAgICAmJiB0aGlzLl9jb25maWcuc2VsZWN0RnJvbU90aGVyTW9udGgpIHtcbiAgICAgICAgICAgIHRoaXMub25TZWxlY3QuZW1pdCh3ZWVrLmRheXNbMF0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWVrLmRheXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICB2YXIgc2VsZWN0ZWREYXkgPSB3ZWVrLmRheXMuZmluZCgoLyoqXG4gICAgICAgICAqIEBwYXJhbSB7P30gZGF5XG4gICAgICAgICAqIEByZXR1cm4gez99XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuX2NvbmZpZy5zZWxlY3RGcm9tT3RoZXJNb250aFxuICAgICAgICAgICAgICAgID8gIWRheS5pc0Rpc2FibGVkXG4gICAgICAgICAgICAgICAgOiAhZGF5LmlzT3RoZXJNb250aCAmJiAhZGF5LmlzRGlzYWJsZWQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdC5lbWl0KHNlbGVjdGVkRGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gY2VsbFxuICAgICAqIEBwYXJhbSB7P30gaXNIb3ZlcmVkXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQucHJvdG90eXBlLndlZWtIb3ZlckhhbmRsZXIgPSAvKipcbiAgICAgKiBAcGFyYW0gez99IGNlbGxcbiAgICAgKiBAcGFyYW0gez99IGlzSG92ZXJlZFxuICAgICAqIEByZXR1cm4gez99XG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNlbGwsIGlzSG92ZXJlZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5zZWxlY3RXZWVrKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgICAgICB2YXIgaGFzQWN0aXZlRGF5cyA9IGNlbGwuZGF5cy5maW5kKCgvKipcbiAgICAgICAgICogQHBhcmFtIHs/fSBkYXlcbiAgICAgICAgICogQHJldHVybiB7P31cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChkYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fY29uZmlnLnNlbGVjdEZyb21PdGhlck1vbnRoXG4gICAgICAgICAgICAgICAgPyAhZGF5LmlzRGlzYWJsZWRcbiAgICAgICAgICAgICAgICA6ICFkYXkuaXNPdGhlck1vbnRoICYmICFkYXkuaXNEaXNhYmxlZDtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAoaGFzQWN0aXZlRGF5cykge1xuICAgICAgICAgICAgY2VsbC5pc0hvdmVyZWQgPSBpc0hvdmVyZWQ7XG4gICAgICAgICAgICB0aGlzLmlzV2Vla0hvdmVyZWQgPSBpc0hvdmVyZWQ7XG4gICAgICAgICAgICB0aGlzLm9uSG92ZXJXZWVrLmVtaXQoY2VsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P30gY2VsbFxuICAgICAqIEBwYXJhbSB7P30gaXNIb3ZlcmVkXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKi9cbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQucHJvdG90eXBlLmhvdmVyRGF5ID0gLyoqXG4gICAgICogQHBhcmFtIHs/fSBjZWxsXG4gICAgICogQHBhcmFtIHs/fSBpc0hvdmVyZWRcbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjZWxsLCBpc0hvdmVyZWQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZy5zZWxlY3RGcm9tT3RoZXJNb250aCAmJiBjZWxsLmlzT3RoZXJNb250aCkge1xuICAgICAgICAgICAgY2VsbC5pc090aGVyTW9udGhIb3ZlcmVkID0gaXNIb3ZlcmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Ib3Zlci5lbWl0KHsgY2VsbDogY2VsbCwgaXNIb3ZlcmVkOiBpc0hvdmVyZWQgfSk7XG4gICAgfTtcbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICAgICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnYnMtZGF5cy1jYWxlbmRhci12aWV3JyxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIlxcbiAgICA8YnMtY2FsZW5kYXItbGF5b3V0PlxcbiAgICAgIDxicy1kYXRlcGlja2VyLW5hdmlnYXRpb24tdmlld1xcbiAgICAgICAgW2NhbGVuZGFyXT1cXFwiY2FsZW5kYXJcXFwiXFxuICAgICAgICAob25OYXZpZ2F0ZSk9XFxcIm5hdmlnYXRlVG8oJGV2ZW50KVxcXCJcXG4gICAgICAgIChvblZpZXdNb2RlKT1cXFwiY2hhbmdlVmlld01vZGUoJGV2ZW50KVxcXCJcXG4gICAgICA+PC9icy1kYXRlcGlja2VyLW5hdmlnYXRpb24tdmlldz5cXG5cXG4gICAgICA8IS0tZGF5cyBtYXRyaXgtLT5cXG4gICAgICA8dGFibGUgcm9sZT1cXFwiZ3JpZFxcXCIgY2xhc3M9XFxcImRheXMgd2Vla3NcXFwiPlxcbiAgICAgICAgPHRoZWFkPlxcbiAgICAgICAgPHRyPlxcbiAgICAgICAgICA8IS0taWYgc2hvdyB3ZWVrcy0tPlxcbiAgICAgICAgICA8dGggKm5nSWY9XFxcIm9wdGlvbnMuc2hvd1dlZWtOdW1iZXJzXFxcIj48L3RoPlxcbiAgICAgICAgICA8dGggKm5nRm9yPVxcXCJsZXQgd2Vla2RheSBvZiBjYWxlbmRhci53ZWVrZGF5czsgbGV0IGkgPSBpbmRleFxcXCJcXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIndlZWtkYXlcXFwiPnt7IGNhbGVuZGFyLndlZWtkYXlzW2ldIH19XFxuICAgICAgICAgIDwvdGg+XFxuICAgICAgICA8L3RyPlxcbiAgICAgICAgPC90aGVhZD5cXG4gICAgICAgIDx0Ym9keT5cXG4gICAgICAgIDx0ciAqbmdGb3I9XFxcImxldCB3ZWVrIG9mIGNhbGVuZGFyLndlZWtzOyBsZXQgaSA9IGluZGV4XFxcIj5cXG4gICAgICAgICAgPHRkIGNsYXNzPVxcXCJ3ZWVrXFxcIiBbY2xhc3MuYWN0aXZlLXdlZWtdPVxcXCJpc1dlZWtIb3ZlcmVkXFxcIiAgKm5nSWY9XFxcIm9wdGlvbnMuc2hvd1dlZWtOdW1iZXJzXFxcIj5cXG4gICAgICAgICAgICA8c3BhblxcbiAgICAgICAgICAgICAgICAoY2xpY2spPVxcXCJzZWxlY3RXZWVrKHdlZWspXFxcIlxcbiAgICAgICAgICAgICAgICAobW91c2VlbnRlcik9XFxcIndlZWtIb3ZlckhhbmRsZXIod2VlaywgdHJ1ZSlcXFwiXFxuICAgICAgICAgICAgICAgIChtb3VzZWxlYXZlKT1cXFwid2Vla0hvdmVySGFuZGxlcih3ZWVrLCBmYWxzZSlcXFwiPnt7IGNhbGVuZGFyLndlZWtOdW1iZXJzW2ldIH19PC9zcGFuPlxcbiAgICAgICAgICA8L3RkPlxcbiAgICAgICAgICA8dGQgKm5nRm9yPVxcXCJsZXQgZGF5IG9mIHdlZWsuZGF5c1xcXCIgcm9sZT1cXFwiZ3JpZGNlbGxcXFwiPlxcbiAgICAgICAgICA8c3BhbiBic0RhdGVwaWNrZXJEYXlEZWNvcmF0b3JcXG4gICAgICAgICAgICAgICAgW2RheV09XFxcImRheVxcXCJcXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cXFwic2VsZWN0RGF5KGRheSlcXFwiXFxuICAgICAgICAgICAgICAgIChtb3VzZWVudGVyKT1cXFwiaG92ZXJEYXkoZGF5LCB0cnVlKVxcXCJcXG4gICAgICAgICAgICAgICAgKG1vdXNlbGVhdmUpPVxcXCJob3ZlckRheShkYXksIGZhbHNlKVxcXCI+e3sgZGF5LmxhYmVsIH19PC9zcGFuPlxcbiAgICAgICAgICA8L3RkPlxcbiAgICAgICAgPC90cj5cXG4gICAgICAgIDwvdGJvZHk+XFxuICAgICAgPC90YWJsZT5cXG5cXG4gICAgPC9icy1jYWxlbmRhci1sYXlvdXQ+XFxuICBcIlxuICAgICAgICAgICAgICAgIH1dIH1cbiAgICBdO1xuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtcbiAgICAgICAgeyB0eXBlOiBCc0RhdGVwaWNrZXJDb25maWcgfVxuICAgIF07IH07XG4gICAgQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICBjYWxlbmRhcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgICAgIG9wdGlvbnM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgICAgICBvbk5hdmlnYXRlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgICAgIG9uVmlld01vZGU6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICAgICAgb25TZWxlY3Q6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICAgICAgb25Ib3ZlcjogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgICAgICBvbkhvdmVyV2VlazogW3sgdHlwZTogT3V0cHV0IH1dXG4gICAgfTtcbiAgICByZXR1cm4gQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50O1xufSgpKTtcbmV4cG9ydCB7IEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudCB9O1xuaWYgKGZhbHNlKSB7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUuY2FsZW5kYXI7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUub3B0aW9ucztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50LnByb3RvdHlwZS5vbk5hdmlnYXRlO1xuICAgIC8qKiBAdHlwZSB7P30gKi9cbiAgICBCc0RheXNDYWxlbmRhclZpZXdDb21wb25lbnQucHJvdG90eXBlLm9uVmlld01vZGU7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUub25TZWxlY3Q7XG4gICAgLyoqIEB0eXBlIHs/fSAqL1xuICAgIEJzRGF5c0NhbGVuZGFyVmlld0NvbXBvbmVudC5wcm90b3R5cGUub25Ib3ZlcjtcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50LnByb3RvdHlwZS5vbkhvdmVyV2VlaztcbiAgICAvKiogQHR5cGUgez99ICovXG4gICAgQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50LnByb3RvdHlwZS5pc1dlZWtIb3ZlcmVkO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQnNEYXlzQ2FsZW5kYXJWaWV3Q29tcG9uZW50LnByb3RvdHlwZS5fY29uZmlnO1xufVxuIl19